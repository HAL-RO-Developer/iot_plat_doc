# ArduinoIDEコーディング規約

## はじめに

### 目的
本規約は，ArduinoIDEに記述されたプログラムの品質向上を目的に，守るべき最低限のルールを規定し、
コードの可読性・保守性・メンテナンス性の向上を目的とする。

### 定義、頭文語、略語
無し

## 全般規約

### エンコーディング（文字コード）に関する規約
コードは、UTF-8で記述する。

### インデントに関する規約
インデントはスペースキーで行い、幅は４のみ許可する。

### コンパイラに関する規約
コンパイラレベルは最高レベルに設定し、警告は全て取り除くこと。
ArduinoIDEでは、ファイル→環境設定→より詳細な情報を表示する項目のコンパイルにチェックを入れ、
コンパイラの警告を全てに設定する。

### ファイル内部構成
ソースファイル・ヘッダファイルの内部構成は以下のルールとする。
1. ファイルヘッダ
本ファイルの説明が記載されている。
2. 関数ヘッダ
関数の概要・引数・戻り値の型と意味が記載されている。
3. 関数処理（実体）
実際のプログラムが記述されている。
setupとloopは、以下のようにプログラムの最初に記載する。
4. ファイルフッタ
全プログラムの最後に著作権が記載されている。

```c
ファイルヘッダ

関数ヘッダ
void setup() {
  処理
}

関数ヘッダ
void loop() {
  処理
}

関数ヘッダ
関数処理() {
  処理
}

ファイルフッタ
```

### ヘッダに関する規約

#### ファイルヘッダに関する規約
ファイルヘッダには、ファイル名、プロジェクト名、機能概要、更新履歴、更新日付、作成者氏名、includeファイル情報、typedef宣言(ヘッダのみ)、定数定義(同ファイルで用いるもののみ記述する。
複数ファイルで使用する定数の場合はヘッダへ記述)、グローバル変数宣言。
ファイルヘッダは、ヘッダファイル、ソースファイルの共に適応する事。

``` c
/*
  ファイル名

  制御内容を簡潔に表現する。
  個々のピンに接続されたコンポーネントを参照する。

  The circuit:
   * 各inputに接続されているコンポーネントのリスト
   * 各outputに接続されているコンポーネントのリスト

  Created 年月日
  By 著者名
  Modified 年月日
  Place 変更箇所
  By 著者名
*/

/* includeファイル */

/* typedef宣言 */

/* 定数定義 */

/* グローバル変数 */

```
or
```c
// ファイル名
//
// 制御内容を簡潔に表現する。
// 個々のピンに接続されたコンポーネントを参照する。
//
// The circuit:
//   * 各inputに接続されているコンポーネントのリスト
//   * 各outputに接続されているコンポーネントのリスト
//
// Created 年月日
// By 著者名
// Modified 年月日
// Place 変更箇所
// By 著者名

// includeファイル

// typedef宣言

// 定数定義

// グローバル変数
```

使用例

```c
/*
  LEDFlashing.ino

  LED点滅回路
  16番ピンに接続されたLEDを点滅させる。

  The circuit:
   * input:none
   * output:16

  Created 2017/07/01
  By Hirotaka Nagaoka
  Modified 2017/07/05
  Place 点滅周期変更
  By Hirotaka Nagaoka
*/

/* includeファイル */
#include <arduino.h>
#include "ESP8266WiFi.h"

/* typedef宣言 */
typedef enum statusLED{
    OFF = 0,
    ON
} STATUS_LED;

/* 定数定義 */
#define PIN_LED 16

/* グローバル変数 */
static unsigned int flagState = 1;
```
#### ファイルフッタに関する規約
ファイルフッタには権利ロゴを記述する。
```c
/* Copyright HAL College of Technology & Design */

```
or
```c
// Copyright HAL College of Technology & Design
```

#### 関数ヘッダに関する規約
各種関数開始の前に、以下の規約に従って関数ヘッダを記述する。関数ヘッダには、以下の項目を
記述する。関数名、機能名、機能概要、引数の型、引数名、I/O情報、引数の解説、戻り値の型、
戻り値の値、作成日、作成者。

```c
/*
  関数名

  機能名

  機能概要

  引数:

  戻り値:

  Created 年月日
  By 著者名  
*/

```

or

```c
// 関数名
//
// 機能名
//
// 機能概要
//
// 引数:
//
// 戻り値:
//
// Created 年月日
// By 著者名

```

使用例

```c
/*
  LEDFlashing

  LED点滅

  LEDを一定周期で点滅させる。

  引数:
  STATUS_LED led   LED点滅関数実行前のLEDの状態

  戻り値:
  STATUS_LED       LED点滅関数実行後のLEDの状態

  Created 2017/07/01
  By Hirotaka Nagaoka
*/
```

### ファイル名に関する規約
単語は英語を主体とする。ローマ字は認めない。また、英字の略語は許可する。
ファイル名は「アッパーキャメルケース」で統一すること。
``
例)IotPlatFormSetup.ino
``
ヘッダーファイルは、機能名を採用する。
``
例)ESP8266Setup.h
``
### 関数名に関する記述
単語は英語を主体とする。ローマ字は認めない。また、英字の略語は許可する。
関数名は「ローワーキャメルケース」で統一すること。
名前は長くても20文字程度に収まるようにする。
「～であるか」、「～を有するか」、「～が可能か」といった場合、isを付ける。
``
例)int getPortState( int a, int b );
``

#### 関数名 スコープ位置に関する規約
関数のスコープ開始位置は、関数名の１行下に記述すること。
後述する制御文のスコープ位置とは扱いが異なる為注意すること。

### 関数記述に関する規約
関数の引数が存在しない場合、必ずvoidを付与すること。

### スペースに関する規約
各項目に特別な表記が無い限り、以下の規約に従う。

1. 演算子とオペランドの間
`a += 1;`
※アロー、ドット、インクリメント、デクリメント演算子は例外とする。

2. 制御文・関数等と丸括弧の間
`if( a )`

3. 制御文・関数等が終わる等の丸括弧と中括弧の間
`switch( c ) {`

4. カンマの後ろや処理を区切る部分等
`func( a, b );	for( a = 0; a < 20; a ++ ) {`

### コメントに関する規約
コメントは、``/* */``もしくは、``//``で記述する。
ただし、どちらかで統一すること。共存は認めない。
コメントの始まりと終わりには必ず半角スペースを一つ入れること。
`/* コメント */`
`// コメント`

#### 通常コメント(変数宣言時)
変数宣言時は必ず変数の意味をコメント記述すること。変数宣言時のコメントは先頭を必ず揃えること。
```c
int pinState = 1;   // ピンの状態
char string[MAX];   // 最大文字格納領域
```

#### 通常コメント(制御文／その他通常コメント)
制御文や処理の一行上にコメントのみ記述する。

### 変数による規約
変数に関する定義・宣言に関する規約を以下に示す。

#### 変数名に関する規約
単語は英語を主体とする。ローマ字は認めない。また、英字の略語は許可する。
変数名は「アッパーキャメルケース」で統一すること。
`例)buttonState`

#### グローバル変数名に関する規約
単語は英語を主体とする。ローマ字は認めない。また、英字の略語は許可する。
グローバル変数名は「g+アッパーキャメルケース」で統一すること。
`例)int gState = STATE_NONE`

### 構造体定義に関する規約
単語は英語を主体とする。ローマ字は認めない。また、英字の略語は許可する。
構造体型名は「全て大文字&スネークケース」で統一すること。
構造体メンバ名は全て意味のある英単語及び略語、また、全て小文字で表記を行う。

### 定数・マクロに関する規約
単語は英語を主体とする。ローマ字は認めない。また、英字の略語は許可する。
定数名は「全て大文字&スネークケース」で統一すること。
プログラム上での誤作動を避けるため定義値(式)を( )で括る。
`例)#define PIN_MODE ( 1 )`

### クラス名に関する規約
単語は英語を主体とする。ローマ字は認めない。また、英字の略語は許可する。
定数名は「アッパーキャメルケース」で統一すること。

### メソッド名に関する規約
単語は英語を主体とする。ローマ字は認めない。また、英字の略語は許可する。
定数名は「ローワーキャメルケース」で統一すること。
動詞や助動詞を用いて命名する。
